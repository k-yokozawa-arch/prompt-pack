# 自己レビュー・ルーブリック
保守運用(設定外出し/ログ/タイムアウト/相関ID/監視)／UI(a11y/状態3点/レスポンシブ)／
セキュリティ(入力検証/権限/監査)／テスト(正常/失敗/境界/E2E)／可搬性(抽象化)
改善パッチがあればdiffで提示



ルーブリック（rubric）は、成果物を評価・自己レビューするための採点基準表／チェック基準です。
「このPRは“良い”のか？」を感覚ではなく観点×基準で確認するためのもの。あなたの rubric.md は、その基準を短く圧縮した“自分たちの品質ゲート”です。

何が書かれている？（意訳）

保守運用(設定外出し/ログ/タイムアウト/相関ID/監視)／
UI(a11y/状態3点/レスポンシブ)／
セキュリティ(入力検証/権限/監査)／
テスト(正常/失敗/境界/E2E)／
可搬性(抽象化)
改善パッチがあればdiffで提示

観点の意味

保守運用：ハードコード禁止（設定外出し）、構造化ログ、リクエストのタイムアウト、相関ID付与、メトリクス/監視があるか

UI：アクセシビリティ（WAI-ARIA/ラベル/フォーカスリング）、Loading/Empty/Error の3状態、レスポンシブ対応

セキュリティ：入力スキーマ検証（例: Zod/JSON Schema）、権限/認可チェック、監査ログ

テスト：正常・失敗・境界・E2Eをカバー（スナップショット依存し過ぎない）

可搬性：抽象化/DIでスタック非依存に（実装差し替え可能）

改善パッチがあればdiffで：基準を満たしていない所があれば、言うだけでなく最小差分（パッチ）を出すという運用ルール。

どう使う？（実務フロー）

実装ができたら rubric.mdを開いて観点を1つずつチェック

満たしていない点があれば、その場でミニ修正（ログ追加、Zodスキーマ追加など）

可能なら 改善diff をPR本文に貼る（レビュアーの認知コストを下げる）

例：改善diff（最小パッチ例）
- app.post('/upload', handler)
+ app.post('/upload', zValidator(bodySchema), withTimeout(30_000), withCorrId(), handler)


zValidator → 入力検証

withTimeout → タイムアウト

withCorrId → 相関ID（ログ相関）

クイックチェック（使い回しOK）

 設定外出し：URL/キー/閾値は .env or 設定モジュール経由

 構造化ログ：level/ts/corrId を出力、PIIはマスク

 タイムアウト/リトライ：外部I/Oに上限設定・バックオフ

 監視：主要KPIをメトリクス化（成功率/レイテンシ/エラー率）

 a11y：ラベル、ランドマーク、フォーカスリング、コントラスト

 UI状態：Loading / Empty / Error / 成功トースト

 入力検証：API/フォームともにスキーマ必須（400の形を統一）

 権限：エンドポイント毎に認可チェック（403/404の方針）

 監査：重要操作を監査ログへ（誰が・いつ・何を）

 テスト：正常/失敗/境界/E2Eを1本ずつでも用意

 抽象化：外部依存はインターフェイス越しにDI

まとめ

rubric.md = 自己レビューの定規。PRを出す前の“合格ライン”を明文化したもの。

迷ったらこの観点に戻る → 足りない箇所は 最小diff を添えてPR本文に。

あなたの「非ハードコード・保守運用・スタック非依存・最高のUI/UX」という方針を、毎回ブレずに再現できます。
