{
  "// ═══════════════════════════════════════════════════════════════": {},
  "// 🎯 タスク実行系プロンプト": {},
  "// ═══════════════════════════════════════════════════════════════": {},

  "Task: Full Implementation": {
    "prefix": "/task",
    "description": "【推奨】仕様→設計→実装→テスト→PRまで一括実行",
    "body": [
      "# 🎯 タスク: ${1:機能名}",
      "",
      "## コンテキスト",
      "| 項目 | 内容 |",
      "|------|------|",
      "| 対象ユーザー | ${2:経理担当者/監査人/システム管理者} |",
      "| 成功指標 | ${3:処理時間30分→2分 / エラー率<1%} |",
      "| コスト制約 | ${4:月¥1,000以内/テナント} |",
      "",
      "## 要件",
      "### 入力",
      "- ${5:期間(from/to), フィルタ条件, 出力形式}",
      "",
      "### 出力",
      "- ${6:ジョブID, 進捗率, 完了時のダウンロードURL(署名付き)}",
      "",
      "### エラーケース",
      "- 400: バリデーションエラー（${7:日付形式不正, 必須項目欠落}）",
      "- 403: 権限不足",
      "- 409: 競合（同一ジョブ実行中）",
      "- 500: 内部エラー",
      "",
      "## 実行指示",
      "以下の順序で実装してください：",
      "",
      "### 1️⃣ 仕様確認",
      "- 不明点は仮定を明記して進める",
      "- 既存コードとの整合性を確認",
      "",
      "### 2️⃣ API契約（Contract-First）",
      "- `openapi/*.yaml` にエンドポイント追加",
      "- 生成コマンド実行: `make gen`",
      "- ドリフト検出: `make lint-openapi`",
      "",
      "### 3️⃣ バックエンド実装",
      "- 環境変数から設定を注入（ハードコード禁止）",
      "- 構造化ログ: `correlationId`, `tenantId` を含める",
      "- 監査ログ: append-only + ハッシュチェーン",
      "",
      "### 4️⃣ フロントエンド実装",
      "- UI状態: Loading / Empty / Error / Success",
      "- a11y: ランドマーク, aria-label, フォーカス管理",
      "- i18n: ja-JP / Asia/Tokyo",
      "",
      "### 5️⃣ テスト",
      "- 正常系 / 異常系 / 境界値",
      "- モック戦略を明記",
      "",
      "### 6️⃣ 自己レビュー",
      "- `rubric.md` のチェックリストを通過させる",
      "",
      "### 7️⃣ PR作成",
      "- 変更概要 / リスク / ロールバック手順を記載"
    ]
  },

  "Task: Quick": {
    "prefix": "/task-q",
    "description": "簡易タスク（小規模な修正・追加向け）",
    "body": [
      "# ${1:タスク名}",
      "",
      "**何を**: ${2:実装内容}",
      "**なぜ**: ${3:背景/理由}",
      "**受入条件**: ${4:完了の定義}",
      "",
      "## 制約",
      "- Contract-First（OpenAPI→生成）",
      "- 環境変数で設定注入",
      "- 構造化ログ（corrId/tenantId）",
      "- rubric.md 準拠",
      "",
      "実装してください。"
    ]
  },

  "// ═══════════════════════════════════════════════════════════════ 2": {},
  "// 📜 Contract-First / API設計系": {},
  "// ═══════════════════════════════════════════════════════════════ 2": {},

  "Contract: OpenAPI Design": {
    "prefix": "/api",
    "description": "OpenAPI 3.1 でAPI契約を定義",
    "body": [
      "# API設計: ${1:エンドポイント名}",
      "",
      "## エンドポイント",
      "- **Method**: ${2|GET,POST,PUT,PATCH,DELETE|}",
      "- **Path**: ${3:/api/v1/resource}",
      "- **認証**: ${4|Bearer,API-Key,None|}",
      "",
      "## リクエスト",
      "```yaml",
      "${5:# リクエストボディ/パラメータの説明}",
      "```",
      "",
      "## レスポンス",
      "| Status | 説明 | スキーマ |",
      "|--------|------|---------|",
      "| 200 | ${6:成功} | ${7:ResponseSchema} |",
      "| 400 | バリデーションエラー | ValidationError |",
      "| 403 | 権限不足 | ForbiddenError |",
      "| 500 | 内部エラー | InternalError |",
      "",
      "## 出力指示",
      "1. `openapi/*.yaml` に追加",
      "2. `make gen` で型生成",
      "3. `make lint-openapi` でドリフト検出",
      "4. ハンドラ実装"
    ]
  },

  "Contract: Schema": {
    "prefix": "/schema",
    "description": "OpenAPIスキーマ定義",
    "body": [
      "# スキーマ定義: ${1:ModelName}",
      "",
      "## フィールド",
      "| 名前 | 型 | 必須 | 説明 | 制約 |",
      "|------|---|------|------|------|",
      "| ${2:id} | ${3:string(uuid)} | ${4|Yes,No|} | ${5:説明} | ${6:format: uuid} |",
      "",
      "## バリデーション",
      "- ${7:制約条件}",
      "",
      "## 使用箇所",
      "- ${8:Request/Response/Both}",
      "",
      "`openapi/*.yaml` の `components/schemas` に追加してください。"
    ]
  },

  "// ═══════════════════════════════════════════════════════════════ 3": {},
  "// 🔍 調査・分析系": {},
  "// ═══════════════════════════════════════════════════════════════ 3": {},

  "Investigate: Codebase": {
    "prefix": "/investigate",
    "description": "コードベース調査（実装前の理解）",
    "body": [
      "# 調査: ${1:調査対象}",
      "",
      "## 調査目的",
      "${2:なぜこの調査が必要か}",
      "",
      "## 調査ポイント",
      "1. ${3:既存の実装パターン}",
      "2. ${4:依存関係}",
      "3. ${5:影響範囲}",
      "",
      "## 期待する出力",
      "- 現状の整理（箇条書き）",
      "- 関連ファイル一覧",
      "- 推奨アプローチ",
      "",
      "コードを読んで調査結果を報告してください。"
    ]
  },

  "Investigate: Bug": {
    "prefix": "/debug",
    "description": "バグ調査・原因特定",
    "body": [
      "# バグ調査: ${1:問題の概要}",
      "",
      "## 再現手順",
      "1. ${2:手順1}",
      "2. ${3:手順2}",
      "",
      "## 期待動作",
      "${4:本来の動作}",
      "",
      "## 実際の動作",
      "${5:発生している問題}",
      "",
      "## エラーメッセージ",
      "```",
      "${6:エラー内容}",
      "```",
      "",
      "原因を特定し、修正案を提示してください。"
    ]
  },

  "// ═══════════════════════════════════════════════════════════════ 4": {},
  "// ��️ 設計・アーキテクチャ系": {},
  "// ═══════════════════════════════════════════════════════════════ 4": {},

  "Design: Architecture": {
    "prefix": "/design",
    "description": "アーキテクチャ設計",
    "body": [
      "# 設計: ${1:機能/コンポーネント名}",
      "",
      "## 背景",
      "${2:なぜこの設計が必要か}",
      "",
      "## 要件",
      "### 機能要件",
      "- ${3:FR1}",
      "",
      "### 非機能要件",
      "| 項目 | 要件 |",
      "|------|------|",
      "| パフォーマンス | ${4:レスポンス < 200ms} |",
      "| 可用性 | ${5:99.9%} |",
      "| セキュリティ | ${6:認証/認可/監査ログ} |",
      "",
      "## 制約",
      "- ${7:既存システムとの互換性}",
      "",
      "## 出力",
      "1. アーキテクチャ図（Mermaid）",
      "2. コンポーネント責務",
      "3. データフロー",
      "4. エラーハンドリング方針",
      "5. 実装優先度"
    ]
  },

  "Design: Database": {
    "prefix": "/design-db",
    "description": "データベーススキーマ設計",
    "body": [
      "# DB設計: ${1:テーブル/機能名}",
      "",
      "## 要件",
      "- ${2:保存するデータと用途}",
      "",
      "## 考慮事項",
      "- マルチテナント: ${3|RLS,カラム分離,スキーマ分離|}",
      "- 監査: ${4|追記のみ,論理削除,物理削除|}",
      "- 保持期間: ${5:7年（電帳法）}",
      "",
      "## 出力",
      "1. CREATE TABLE文",
      "2. インデックス設計",
      "3. RLSポリシー（該当時）",
      "4. マイグレーションSQL"
    ]
  },

  "// ═══════════════════════════════════════════════════════════════ 5": {},
  "// ✅ レビュー・品質保証系": {},
  "// ═══════════════════════════════════════════════════════════════ 5": {},

  "Review: Code": {
    "prefix": "/review",
    "description": "コードレビュー依頼",
    "body": [
      "# コードレビュー依頼",
      "",
      "## レビュー観点",
      "- [ ] Contract-First（OpenAPI↔実装の整合性）",
      "- [ ] セキュリティ（入力検証/認可/監査ログ）",
      "- [ ] エラーハンドリング（ユーザー向け/ログ分離）",
      "- [ ] パフォーマンス（N+1/不要なループ）",
      "- [ ] 可読性（命名/構造/コメント）",
      "- [ ] テスタビリティ（DI/モック可能）",
      "",
      "## 重点確認",
      "${1:特に確認してほしい点}",
      "",
      "問題点と改善案を指摘してください。"
    ]
  },

  "Review: Security": {
    "prefix": "/review-sec",
    "description": "セキュリティレビュー",
    "body": [
      "# セキュリティレビュー",
      "",
      "## チェック項目",
      "### 入力検証",
      "- [ ] SQLインジェクション対策",
      "- [ ] XSS対策（出力エスケープ）",
      "- [ ] パストラバーサル対策",
      "- [ ] SSRF対策",
      "",
      "### 認証・認可",
      "- [ ] 認証バイパスの可能性",
      "- [ ] 権限昇格の可能性",
      "- [ ] IDOR（オブジェクト直接参照）",
      "",
      "### データ保護",
      "- [ ] 機密情報のログ出力",
      "- [ ] 暗号化（転送中/保存時）",
      "",
      "### 設定",
      "- [ ] CORS設定",
      "- [ ] セキュリティヘッダー",
      "- [ ] Rate Limiting",
      "",
      "脆弱性と対策を報告してください。"
    ]
  },

  "// ═══════════════════════════════════════════════════════════════ 6": {},
  "// 🧪 テスト系": {},
  "// ═══════════════════════════════════════════════════════════════ 6": {},

  "Test: Unit": {
    "prefix": "/test",
    "description": "ユニットテスト作成",
    "body": [
      "# テスト作成: ${1:対象関数/コンポーネント}",
      "",
      "## テストケース",
      "### 正常系",
      "- ${2:有効な入力で期待する出力}",
      "",
      "### 異常系",
      "- ${3:無効な入力でエラー}",
      "- ${4:境界値}",
      "",
      "### エッジケース",
      "- ${5:空/null/undefined}",
      "",
      "## モック方針",
      "- ${6:外部依存のモック方法}",
      "",
      "テストコードを生成してください。"
    ]
  },

  "Test: E2E": {
    "prefix": "/test-e2e",
    "description": "E2Eテストシナリオ",
    "body": [
      "# E2Eテスト: ${1:機能名}",
      "",
      "## シナリオ",
      "```gherkin",
      "Feature: ${1}",
      "",
      "  Scenario: ${2:正常系シナリオ}",
      "    Given ${3:前提条件}",
      "    When ${4:操作}",
      "    Then ${5:期待結果}",
      "",
      "  Scenario: ${6:異常系シナリオ}",
      "    Given ${7:前提条件}",
      "    When ${8:操作}",
      "    Then ${9:エラー表示}",
      "```",
      "",
      "## テストデータ",
      "- ${10:必要なテストデータ}",
      "",
      "テストコードを生成してください。"
    ]
  },

  "// ═══════════════════════════════════════════════════════════════ 7": {},
  "// 📝 ドキュメント・PR系": {},
  "// ═══════════════════════════════════════════════════════════════ 7": {},

  "Doc: PR": {
    "prefix": "/pr",
    "description": "PR説明文を生成",
    "body": [
      "# PR説明文を生成してください",
      "",
      "## 変更概要",
      "${1:何をどう変更したか}",
      "",
      "## 背景・動機",
      "${2:なぜこの変更が必要か}",
      "",
      "## 含めるべき情報",
      "- 変更点（API/実装/UI/テスト）",
      "- 破壊的変更の有無",
      "- リスクと緩和策",
      "- ロールバック手順",
      "- 運用/コストへの影響",
      "- 動作確認方法",
      "",
      "## フォーマット",
      "```markdown",
      "## 概要",
      "## 変更点",
      "## 破壊的変更",
      "## テスト",
      "## チェックリスト",
      "```"
    ]
  },

  "Doc: ADR": {
    "prefix": "/adr",
    "description": "Architecture Decision Record",
    "body": [
      "# ADR: ${1:タイトル}",
      "",
      "## ステータス",
      "${2|提案,承認,廃止,置換|}",
      "",
      "## コンテキスト",
      "${3:この決定が必要になった背景}",
      "",
      "## 検討した選択肢",
      "### 選択肢A: ${4}",
      "- ✅ ${5:メリット}",
      "- ❌ ${6:デメリット}",
      "",
      "### 選択肢B: ${7}",
      "- ✅ ${8:メリット}",
      "- ❌ ${9:デメリット}",
      "",
      "## 決定",
      "${10:採用した選択肢と理由}",
      "",
      "## 影響",
      "${11:この決定による影響}"
    ]
  },

  "// ═══════════════════════════════════════════════════════════════ 8": {},
  "// 🔧 リファクタリング・改善系": {},
  "// ═══════════════════════════════════════════════════════════════ 8": {},

  "Refactor: Code": {
    "prefix": "/refactor",
    "description": "コードリファクタリング",
    "body": [
      "# リファクタリング: ${1:対象}",
      "",
      "## 現状の問題",
      "${2:何が問題か}",
      "",
      "## 改善目標",
      "- ${3:可読性/保守性/パフォーマンス}",
      "",
      "## 制約",
      "- 振る舞いを変えない",
      "- テストが通る状態を維持",
      "- ${4:その他の制約}",
      "",
      "## 期待する改善",
      "- ${5:具体的な改善点}",
      "",
      "リファクタリング案を提示してください。"
    ]
  },

  "Refactor: Performance": {
    "prefix": "/perf",
    "description": "パフォーマンス改善",
    "body": [
      "# パフォーマンス改善: ${1:対象}",
      "",
      "## 現状",
      "- 処理時間: ${2:現在の値}",
      "- 目標: ${3:目標値}",
      "",
      "## ボトルネック候補",
      "- ${4:N+1クエリ/ループ内IO/不要な計算}",
      "",
      "## 制約",
      "- ${5:メモリ制限/互換性}",
      "",
      "改善案を提示してください。"
    ]
  },

  "// ═══════════════════════════════════════════════════════════════ 9": {},
  "// 🚀 デプロイ・運用系": {},
  "// ═══════════════════════════════════════════════════════════════ 9": {},

  "Ops: Deploy": {
    "prefix": "/deploy",
    "description": "デプロイ手順作成",
    "body": [
      "# デプロイ: ${1:環境}",
      "",
      "## 変更内容",
      "${2:デプロイする変更}",
      "",
      "## 前提条件",
      "- ${3:必要な環境変数/シークレット}",
      "",
      "## デプロイ手順を生成してください",
      "- 事前確認",
      "- 実行コマンド",
      "- 動作確認",
      "- ロールバック手順"
    ]
  },

  "Ops: Incident": {
    "prefix": "/incident",
    "description": "インシデント対応",
    "body": [
      "# インシデント: ${1:概要}",
      "",
      "## 症状",
      "${2:何が起きているか}",
      "",
      "## 影響範囲",
      "${3:影響を受けるユーザー/機能}",
      "",
      "## 確認済み情報",
      "- ${4:ログ/メトリクス/エラーメッセージ}",
      "",
      "## 期待するサポート",
      "- 原因の仮説",
      "- 調査手順",
      "- 緩和策"
    ]
  }
}
